"use strict";(self.webpackChunkweihubeats_website=self.webpackChunkweihubeats_website||[]).push([[7431],{187:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/consumer-config-fetch-501c365115a2b7a45e58ba933946aa79.png"},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var c=s(6540);const i={},r=c.createContext(i);function a(e){const n=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),c.createElement(r.Provider,{value:n},e.children)}},8807:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>o,frontMatter:()=>a,metadata:()=>c,toc:()=>t});const c=JSON.parse('{"id":"MQ/Kafka/\u6700\u4f73\u5b9e\u8df5/\u804a\u804akafka client\u6027\u80fd\u8c03\u4f18\u53cakafka\u6700\u4f73\u5b9e\u8df5","title":"\u804a\u804akafka client\u6027\u80fd\u8c03\u4f18\u53cakafka\u6700\u4f73\u5b9e\u8df5","description":"\u8fd9\u91cc\u662fweihubeats,\u89c9\u5f97\u6587\u7ae0\u4e0d\u9519\u53ef\u4ee5\u5173\u6ce8\u516c\u4f17\u53f7\u5c0f\u594f\u6280\u672f\uff0c\u6587\u7ae0\u9996\u53d1\u3002\u62d2\u7edd\u8425\u9500\u53f7\uff0c\u62d2\u7edd\u6807\u9898\u515a","source":"@site/docs/MQ/Kafka/\u6700\u4f73\u5b9e\u8df5/\u804a\u804akafka client\u6027\u80fd\u8c03\u4f18\u53cakafka\u6700\u4f73\u5b9e\u8df5.md","sourceDirName":"MQ/Kafka/\u6700\u4f73\u5b9e\u8df5","slug":"/MQ/Kafka/\u6700\u4f73\u5b9e\u8df5/\u804a\u804akafka client\u6027\u80fd\u8c03\u4f18\u53cakafka\u6700\u4f73\u5b9e\u8df5","permalink":"/docs/MQ/Kafka/\u6700\u4f73\u5b9e\u8df5/\u804a\u804akafka client\u6027\u80fd\u8c03\u4f18\u53cakafka\u6700\u4f73\u5b9e\u8df5","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/MQ/Kafka/\u6700\u4f73\u5b9e\u8df5/\u804a\u804akafka client\u6027\u80fd\u8c03\u4f18\u53cakafka\u6700\u4f73\u5b9e\u8df5.md","tags":[],"version":"current","frontMatter":{},"sidebar":"Kafka","previous":{"title":"spring boot\u4e2dkafka\u6d88\u606f\u7684\u987a\u5e8f\u53d1\u9001\u548c\u6d88\u8d39","permalink":"/docs/MQ/Kafka/\u6700\u4f73\u5b9e\u8df5/spring boot\u4e2dkafka\u6d88\u606f\u7684\u987a\u5e8f\u53d1\u9001\u548c\u6d88\u8d39"},"next":{"title":"kafka\u5220\u9664topic\u6e90\u7801\u5206\u6790","permalink":"/docs/MQ/Kafka/\u6e90\u7801\u5206\u6790/kafka\u5220\u9664topic\u6e90\u7801\u5206\u6790"}}');var i=s(4848),r=s(8453);const a={},l=void 0,d={},t=[{value:"\u80cc\u666f",id:"\u80cc\u666f",level:2},{value:"producer",id:"producer",level:2},{value:"batch.size",id:"batchsize",level:3},{value:"linger.ms",id:"lingerms",level:3},{value:"consumer",id:"consumer",level:2},{value:"kafka\u6700\u4f73\u5b9e\u8df5",id:"kafka\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\u662f",(0,i.jsx)(n.strong,{children:"weihubeats"}),",\u89c9\u5f97\u6587\u7ae0\u4e0d\u9519\u53ef\u4ee5\u5173\u6ce8\u516c\u4f17\u53f7",(0,i.jsx)(n.strong,{children:"\u5c0f\u594f\u6280\u672f"}),"\uff0c\u6587\u7ae0\u9996\u53d1\u3002\u62d2\u7edd\u8425\u9500\u53f7\uff0c\u62d2\u7edd\u6807\u9898\u515a"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u80cc\u666f",children:"\u80cc\u666f"}),"\n",(0,i.jsxs)(n.p,{children:["\u6700\u8fd1\u5728\u4f7f\u7528",(0,i.jsx)(n.code,{children:"kafka"}),"\u7684\u65f6\u5019\u9047\u5230\u4e86\u4e00\u4e9b\u6027\u80fd\u95ee\u9898\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6240\u4ee5\u5c31\u6253\u7b97\u7814\u7a76\u4e0b",(0,i.jsx)(n.code,{children:"kafka"}),"\u76f8\u5173\u7684\u6027\u80fd\u4f18\u5316\u65b9\u6848\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"client"}),"\u4e3b\u8981\u5206\u4e24\u4e2a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"producer"}),"\n",(0,i.jsx)(n.li,{children:"consumer"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"producer",children:"producer"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"producer"}),"\u4e3b\u8981\u662f\u6709\u4e24\u4e2a\u6838\u5fc3\u53c2\u6570"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"batch.size"}),"\n",(0,i.jsx)(n.li,{children:"linger.ms"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"batchsize",children:"batch.size"}),"\n",(0,i.jsxs)(n.p,{children:["\u5148\u8bf4\u8bf4\u8fd9\u4e2a\u53c2\u6570\u5427\n",(0,i.jsx)(n.code,{children:"batch.size"}),"\u662f",(0,i.jsx)(n.code,{children:"producer"}),"\u7684\u53c2\u6570\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u591a\u6761\u6d88\u606f\u53d1\u9001\u5230\u76f8\u540c\u5206\u533a\u65f6\uff0c",(0,i.jsx)(n.code,{children:"producer"}),"\u5c31\u4f1a\u5c06\u6d88\u606f\u6253\u5305\u5230\u4e00\u8d77\uff0c\u7136\u540e\u4e00\u6b21\u6027\u6279\u91cf\u53d1\u9001\u5230",(0,i.jsx)(n.code,{children:"kafka"}),"\u3002\u51cf\u5c11\u7f51\u7edc\u8bf7\u6c42"]}),"\n",(0,i.jsxs)(n.p,{children:["\u9ed8\u8ba4\u5230\u5c0f\u662f",(0,i.jsx)(n.code,{children:"16384"}),"\u5373",(0,i.jsx)(n.code,{children:"16kb"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:s(9488).A+"",width:"2279",height:"236"})}),"\n",(0,i.jsx)(n.p,{children:"\u9ed8\u8ba4\u503c\u5176\u5b9e\u662f\u504f\u5c0f\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u6700\u597d\u8bbe\u7f6e\u4e3a\u66f4\u5927\u3002"}),"\n",(0,i.jsx)(n.p,{children:"batch.size \u8bbe\u7f6e\u7684\u8d8a\u5927\uff0c\u541e\u5410\u5c31\u8d8a\u5927\uff0c\u4f46\u662f\u5ef6\u8fdf\u4e5f\u4f1a\u8d8a\u5927"}),"\n",(0,i.jsx)(n.h3,{id:"lingerms",children:"linger.ms"}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u8bbe\u60f3\u4e00\u4e0b\uff0c\u5982\u679c\u8981\u53d1\u9001\u7684\u6d88\u606f\u4e00\u76f4\u8fbe\u4e0d\u5230\u6211\u4eec\u7684",(0,i.jsx)(n.code,{children:"batch.size"}),"\u600e\u4e48\u529e\u5462\uff1f"]}),"\n",(0,i.jsx)(n.p,{children:"\u96be\u9053\u6d88\u606f\u4e00\u76f4\u4e0d\u53d1\u9001\u5417\uff1f"}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\u5c31\u63a8\u51fa\u7b2c\u4e8c\u4e2a\u53c2\u6570",(0,i.jsx)(n.code,{children:"linger.ms"}),"\u3002\u8868\u793abatch\u7684\u8d85\u65f6\u65f6\u95f4\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c",(0,i.jsx)(n.code,{children:"linger.ms"}),"\u65f6\u95f4\u5185",(0,i.jsx)(n.code,{children:"batch.size"}),"\u8fd8\u6ca1\u8fbe\u5230\u7684\u8bdd\uff0c\u6d88\u606f\u4e5f\u4f1a\u76f4\u63a5\u53d1\u9001\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u8be5\u503c\u8d8a\u5927\uff0c\u541e\u5410\u8d8a\u5927\u3001\u4f46\u5ef6\u8fdf\u4e5f\u4f1a\u8d8a\u5927"}),"\n",(0,i.jsx)(n.h2,{id:"consumer",children:"consumer"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"consumer"}),"\u8fd9\u8fb9\u7684\u6838\u5fc3\u53c2\u6570\u5c31\u662f",(0,i.jsx)(n.code,{children:"fetch.min.bytes"}),",\u9ed8\u8ba4\u503c\u662f",(0,i.jsx)(n.code,{children:"1kb"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:s(187).A+"",width:"1798",height:"209"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Kafka Broker"}),"\u7aef\u79ef\u53ea\u8981\u79ef\u6512\u4e86",(0,i.jsx)(n.code,{children:"1kb "}),"\u7684\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u8fd4\u56de\u7ed9 ",(0,i.jsx)(n.code,{children:"Consumer"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u7136\u540e\u5c31\u662f\u4e00\u4e2a",(0,i.jsx)(n.code,{children:"fetch.max.wait.ms"}),"\u548c",(0,i.jsx)(n.code,{children:"producer"}),"\u7684",(0,i.jsx)(n.code,{children:"linger.ms"}),"\u7c7b\u4f3c\u3002\u6307\u5b9a",(0,i.jsx)(n.code,{children:"broker"}),"\u6700\u5927\u7b49\u5f85\u65f6\u95f4,\u9ed8\u8ba4500ms"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:s(9950).A+"",width:"2417",height:"308"})}),"\n",(0,i.jsx)(n.h2,{id:"kafka\u6700\u4f73\u5b9e\u8df5",children:"kafka\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,i.jsxs)(n.p,{children:["\u5b9e\u9645\u65e9\u5728\u56fd\u5916",(0,i.jsx)(n.code,{children:"Hortonworks"}),"\u5c31\u603b\u7ed3\u4e86\u4e00\u4e9b",(0,i.jsx)(n.code,{children:"kafka"}),"\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u867d\u7136\u6587\u7ae0\u65f6\u95f4\u4e45\u8fdc\uff0c\u4f46\u662f\u4f9d\u65e7\u5f88\u6709\u53c2\u8003\u4ef7\u503c"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.cnblogs.com/huxi2b/p/6720292.html",children:"\u3010\u8bd1\u3011Kafka\u6700\u4f73\u5b9e\u8df5 / Kafka Best Practices"}),":",(0,i.jsx)(n.a,{href:"https://www.cnblogs.com/huxi2b/p/6720292.html",children:"https://www.cnblogs.com/huxi2b/p/6720292.html"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.infoq.com/articles/apache-kafka-best-practices-to-optimize-your-deployment/",children:"\u539f\u6587"}),":",(0,i.jsx)(n.a,{href:"https://www.infoq.com/articles/apache-kafka-best-practices-to-optimize-your-deployment/",children:"https://www.infoq.com/articles/apache-kafka-best-practices-to-optimize-your-deployment/"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.slideshare.net/HadoopSummit/apache-kafka-best-practices",children:"ppt"}),":",(0,i.jsx)(n.a,{href:"https://www.slideshare.net/HadoopSummit/apache-kafka-best-practices",children:"https://www.slideshare.net/HadoopSummit/apache-kafka-best-practices"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,i.jsxs)(n.p,{children:["\u5176\u5b9e\u53ef\u4ee5\u770b\u5230",(0,i.jsx)(n.code,{children:"producer"}),"\u7684",(0,i.jsx)(n.code,{children:"batch.size"}),"\u548c",(0,i.jsx)(n.code,{children:"linger.ms"}),"\u5c31\u662f\u501f\u9274\u4e86",(0,i.jsx)(n.code,{children:"tcp/ip"}),"\u7684\u7f51\u7edc\u53d1\u9001\u7b97\u6cd5\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"tcp/ip"}),"\u7684",(0,i.jsx)(n.code,{children:"Nagle"}),"\u7b97\u6cd5\u5927\u81f4\u7684\u89c4\u5219\u5982\u4e0b"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u5305\u957f\u5ea6\u8fbe\u5230MSS\uff0c\u5219\u5141\u8bb8\u53d1\u9001"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u5305\u542bFIN\uff0c\u5219\u5141\u8bb8\u53d1\u9001"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u8bbe\u7f6e\u4e86TCP_NODELAY\uff0c\u5219\u5141\u8bb8\u53d1\u9001"}),"\n",(0,i.jsx)(n.li,{children:"\u672a\u8bbe\u7f6eTCP_CORK\u9009\u9879\u65f6\uff0c\u82e5\u6240\u6709\u53d1\u51fa\u53bb\u7684\u5c0f\u6570\u636e\u5305\uff08\u5305\u957f\u5ea6\u5c0f\u4e8eMSS\uff09\u5747\u88ab\u786e\u8ba4\uff0c\u5219\u5141\u8bb8\u53d1\u9001"}),"\n",(0,i.jsx)(n.li,{children:"\u4e0a\u8ff0\u6761\u4ef6\u90fd\u672a\u6ee1\u8db3\uff0c\u4f46\u53d1\u751f\u4e86\u8d85\u65f6\uff08\u4e00\u822c\u4e3a200ms\uff09\uff0c\u5219\u7acb\u5373\u53d1\u9001\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"if there is new data to send then\n    if the window size \u2265 MSS and available data is \u2265 MSS then\n        send complete MSS segment now\n    else\n        if there is unconfirmed data still in the pipe then\n            enqueue data in the buffer until an acknowledge is received\n        else\n            send data immediately\n        end if\n    end if\nend if\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u603b\u5f97\u6765\u8bf4\u4e3b\u8981\u662f\u56db\u4e2a\u53c2\u6570"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"producer"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"batch.size"}),"\n",(0,i.jsx)(n.li,{children:"linger.ms"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"consumer"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"fetch.min.bytes"}),"\n",(0,i.jsx)(n.li,{children:"fetch.max.wait.ms"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5b9e\u9645\u8fd8\u6709\u5f88\u591a\u53c2\u6570\u4e5f\u9700\u8981\u914d\u7f6e\uff0c\u5728",(0,i.jsx)(n.code,{children:"kafka"}),"\u6700\u4f73\u5b9e\u8df5\u91cc\u9762\u90fd\u6709\u4e00\u4e9b\u8bf4\u660e\uff0c\u8fd9\u91cc\u5c31\u4e0d\u8fc7\u591a\u4ecb\u7ecd\u4e86"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},9488:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/kafka-producer-config-batch-c09f157e0cea4fe625ab865f30c43fba.png"},9950:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/broker-config-fetch-59f0e91c98cc8658f634790c2bb2b7e8.png"}}]);