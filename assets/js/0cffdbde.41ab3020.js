"use strict";(globalThis.webpackChunkweihubeats_website=globalThis.webpackChunkweihubeats_website||[]).push([[6695],{97085(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"java/ORM/Mybatis/MyBatisy\u539f\u751f\u53bbXML\u5316\u7684\u9a9a\u64cd\u4f5c\u4ee3\u7801","title":"MyBatisy\u539f\u751f\u53bbXML\u5316\u7684\u9a9a\u64cd\u4f5c\u4ee3\u7801","description":"Mybatis \u523b\u677f\u5370\u8c61","source":"@site/docs/java/ORM/Mybatis/MyBatisy\u539f\u751f\u53bbXML\u5316\u7684\u9a9a\u64cd\u4f5c\u4ee3\u7801.md","sourceDirName":"java/ORM/Mybatis","slug":"/java/ORM/Mybatis/MyBatisy\u539f\u751f\u53bbXML\u5316\u7684\u9a9a\u64cd\u4f5c\u4ee3\u7801","permalink":"/docs/java/ORM/Mybatis/MyBatisy\u539f\u751f\u53bbXML\u5316\u7684\u9a9a\u64cd\u4f5c\u4ee3\u7801","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/java/ORM/Mybatis/MyBatisy\u539f\u751f\u53bbXML\u5316\u7684\u9a9a\u64cd\u4f5c\u4ee3\u7801.md","tags":[],"version":"current","frontMatter":{},"sidebar":"ORM","next":{"title":"Mybatis SQL\u67d3\u8272","permalink":"/docs/java/ORM/Mybatis/Mybatis SQL\u67d3\u8272"}}');var a=s(74848),i=s(28453);const c={},t=void 0,l={},d=[{value:"Mybatis \u523b\u677f\u5370\u8c61",id:"mybatis-\u523b\u677f\u5370\u8c61",level:2},{value:"\u4f60\u4ee5\u4e3a\u7684\u53bbXML\u662f@Select\u6ce8\u89e3\u5417",id:"\u4f60\u4ee5\u4e3a\u7684\u53bbxml\u662fselect\u6ce8\u89e3\u5417",level:2},{value:"\u53d1\u73b0\u65b0\u5927\u9646\uff1aMyBatis \u539f\u751f Provider",id:"\u53d1\u73b0\u65b0\u5927\u9646mybatis-\u539f\u751f-provider",level:2},{value:"\u73b0\u4ee3\u5175\u5668\uff1aMyBatis-Plus (MP)",id:"\u73b0\u4ee3\u5175\u5668mybatis-plus-mp",level:2},{value:"\u7075\u9b42\u62f7\u95ee\uff1a\u590d\u6742\u573a\u666f\u8be5\u5982\u4f55\u9009\u62e9",id:"\u7075\u9b42\u62f7\u95ee\u590d\u6742\u573a\u666f\u8be5\u5982\u4f55\u9009\u62e9",level:2},{value:"\u603b\u7ed3\u4e0e\u5efa\u8bae",id:"\u603b\u7ed3\u4e0e\u5efa\u8bae",level:2}];function o(e){const n={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"mybatis-\u523b\u677f\u5370\u8c61",children:"Mybatis \u523b\u677f\u5370\u8c61"}),"\n",(0,a.jsxs)(n.p,{children:["\u505a Java \u5f00\u53d1\u8fd9\u4e48\u591a\u5e74\uff0c\u63d0\u5230 ",(0,a.jsx)(n.code,{children:"MyBatis"}),"\uff0c\u5927\u5bb6\u8111\u5b50\u91cc\u7684\u7b2c\u4e00\u53cd\u5e94\u901a\u5e38\u662f\uff1a\u201c\u8fd9\u9898\u6211\u4f1a\uff01",(0,a.jsx)(n.code,{children:"Mapper"})," \u63a5\u53e3\u5b9a\u4e49\u65b9\u6cd5\uff0cXML \u91cc\u5199 SQL\u3002\u201d"]}),"\n",(0,a.jsxs)(n.p,{children:["\u65e0\u8bba\u662f\u6700\u65e9\u7684 ",(0,a.jsx)(n.code,{children:"iBatis"})," \u65f6\u4ee3\uff0c\u8fd8\u662f\u540e\u6765\u6d41\u884c\u7684 ",(0,a.jsx)(n.code,{children:"SSM "}),"\u6846\u67b6\uff0c\u751a\u81f3\u662f\u73b0\u5728\u7684 ",(0,a.jsx)(n.code,{children:"Spring Boot"})," \u6574\u5408\uff0c",(0,a.jsx)(n.code,{children:"Mapper.xml"})," \u4f3c\u4e4e\u6210\u4e86 ",(0,a.jsx)(n.code,{children:"MyBatis"})," \u7684\u6807\u914d\u3002\u6211\u4eec\u4e60\u60ef\u4e86\u5728 XML \u91cc\u7528 ",(0,a.jsx)(n.code,{children:'<if test="...">'})," \u62fc\u63a5\u6761\u4ef6\uff0c\u4e60\u60ef\u4e86\u88ab ",(0,a.jsx)(n.code,{children:"OGNL"})," \u8868\u8fbe\u5f0f\u6298\u78e8\uff0c\u4e5f\u4e60\u60ef\u4e86\u5728 ",(0,a.jsx)(n.code,{children:"Java"})," \u548c ",(0,a.jsx)(n.code,{children:"XML"})," \u6587\u4ef6\u4e4b\u95f4\u53cd\u590d\u6a2a\u8df3\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u4f60\u4ee5\u4e3a\u7684\u53bbxml\u662fselect\u6ce8\u89e3\u5417",children:"\u4f60\u4ee5\u4e3a\u7684\u53bbXML\u662f@Select\u6ce8\u89e3\u5417"}),"\n",(0,a.jsxs)(n.p,{children:["\u5b9e\u9645\u4e0a\uff0c\u786e\u5b9e\u6709\u4e00\u4e9b\u538c\u5026\u4e86 ",(0,a.jsx)(n.code,{children:"XML"})," \u7684\u5f00\u53d1\u8005\uff0c\u5728\u9047\u5230\u7b80\u5355 SQL \u65f6\uff0c\u4f1a\u9009\u62e9\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"@Select"})," \u6ce8\u89e3\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Select("SELECT * FROM user WHERE id = #{id}")\nUser selectById(Long id);\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u8fd9\u79cd\u7528\u6cd5\u5728\u5904\u7406\u5355\u8868\u7b80\u5355\u67e5\u8be2\u65f6\uff0c\u786e\u5b9e\u201c\u771f\u9999\u201d\u3002\u4f46\u4e00\u65e6\u4e1a\u52a1\u903b\u8f91\u7a0d\u5fae\u590d\u6742\u4e00\u70b9\uff0c\u9700\u8981\u52a8\u6001 SQL \u65f6\uff0c\u5669\u68a6\u5c31\u5f00\u59cb\u4e86\u3002"}),"\n",(0,a.jsxs)(n.p,{children:["\u5982\u679c\u5728\u6ce8\u89e3\u91cc\u62fc\u63a5\u52a8\u6001 SQL\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528",(0,a.jsx)(n.code,{children:"<script>"})," \u6807\u7b7e\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Select("<script>" +\n        "SELECT * FROM user " +\n        "<where>" +\n        "  <if test=\'name != null\'> AND name = #{name} </if>" +\n        "</where>" +\n        "<\/script>")\nList<User> selectByName(@Param("name") String name);\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u8fd9\u7b80\u76f4\u53cd\u4eba\u7c7b\uff01 \u4e0d\u4ec5\u8981\u624b\u52a8\u8f6c\u4e49\u53cc\u5f15\u53f7\uff0c\u4ee3\u7801\u8fd8\u662f\u4e00\u5768\u5b57\u7b26\u4e32\uff0c\u4e0d\u4ec5\u6ca1\u6709\u8bed\u6cd5\u9ad8\u4eae\uff0c\u53ef\u8bfb\u6027\u548c\u7ef4\u62a4\u6027\u4e5f\u6781\u5dee\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u6240\u4ee5\uff0c\u7edd\u5927\u591a\u6570\u4eba\u5728\u9047\u5230\u52a8\u6001 SQL \u65f6\uff0c\u6700\u540e\u8fd8\u662f\u8001\u8001\u5b9e\u5b9e\u56de\u5230\u4e86 XML \u7684\u6000\u62b1\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<select id="selectUserList" resultType="com.example.User">\n    SELECT * FROM user\n    <where>\n        <if test="name != null and name != \'\'">\n            AND name = #{name}\n        </if>\n        <if test="age != null">\n            AND age > #{age}\n        </if>\n    </where>\n</select>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u53d1\u73b0\u65b0\u5927\u9646mybatis-\u539f\u751f-provider",children:"\u53d1\u73b0\u65b0\u5927\u9646\uff1aMyBatis \u539f\u751f Provider"}),"\n",(0,a.jsxs)(n.p,{children:["\u6700\u8fd1\u5728\u63a5\u6536\u540c\u4e8b\u7684\u9879\u76ee\u65f6\uff0c\u6211\u53d1\u73b0\u4e86\u4e00\u79cd\u4ee5\u524d\u4ece\u672a\u6ce8\u610f\u8fc7\u7684\u5199\u6cd5\u2014\u2014\u5b8c\u5168\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"Java"})," \u6784\u5efa\u52a8\u6001 ",(0,a.jsx)(n.code,{children:"SQL"}),"\uff0c\u4f46\u53c8\u4e0d\u662f\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u62fc\u63a5\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u5b83\u4f7f\u7528\u7684\u662f MyBatis \u539f\u751f\u7684 @SelectProvider \u6ce8\u89e3"}),"\n",(0,a.jsx)(n.p,{children:"\u4ee3\u7801\u957f\u8fd9\u6837\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@SelectProvider(type = UserSqlProvider.class, method = "buildSelectSql")\nList<User> selectByCondition(UserRequest req);\n\n// Provider\u7c7b\npublic String buildSelectSql(UserRequest req) {\n    return new SQL() {{\n        SELECT("*");\n        FROM("user");\n        if (req.getName() != null) WHERE("name = #{name}");\n    }}.toString();\n}\n\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u4f60\u6ca1\u770b\u9519\uff0c\u50cf",(0,a.jsx)(n.code,{children:"SQL"}),"\u3001",(0,a.jsx)(n.code,{children:"SELECT"}),"\u90fd\u662f",(0,a.jsx)(n.code,{children:"Mybatis"}),"\u5b98\u65b9\u63d0\u4f9b\u7684"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"alt text",src:s(19266).A+"",width:"1431",height:"537"})}),"\n",(0,a.jsx)(n.p,{children:"\u600e\u4e48\u6837 \u8fd9\u79cd\u5199\u6cd5\u6ca1\u89c1\u8fc7\u5427"}),"\n",(0,a.jsx)(n.h2,{id:"\u73b0\u4ee3\u5175\u5668mybatis-plus-mp",children:"\u73b0\u4ee3\u5175\u5668\uff1aMyBatis-Plus (MP)"}),"\n",(0,a.jsxs)(n.p,{children:["\u5f53\u7136\uff0c\u5982\u679c\u4f60\u7684\u76ee\u7684\u662f\u201c\u4e0d\u60f3\u5199 SQL\u201d\uff0c\u66ff\u6362",(0,a.jsx)(n.code,{children:"MyBatis"}),"\u76ee\u524d\u7684\u884c\u4e1a\u6807\u51c6\u7b54\u6848\u662f ",(0,a.jsx)(n.code,{children:"MyBatis-Plus"})]}),"\n",(0,a.jsx)(n.p,{children:"\u5bf9\u4e8e 80% \u7684\u5355\u8868\u67e5\u8be2\uff0cMP \u7684 Lambda \u8868\u8fbe\u5f0f\u662f\u78be\u538b\u7ea7\u7684\u5b58\u5728"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"        LambdaQueryWrapper<Object> wrapper = Wrappers.lambdaQuery();\n        wrapper.eq(StringUtils.isNotBlank(req.getName()), User::getName, req.getName())\n            .gt(req.getAge() != null, User::getAge, req.getAge())\n        userMapper.selectList(wrapper);\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u7c7b\u578b\u5b89\u5168\u3001\u65e0\u9700\u786c\u7f16\u7801\u5b57\u6bb5\u540d\u3001\u91cd\u6784\u65b9\u4fbf\uff0c\u8fd9\u786e\u5b9e\u662f\u73b0\u4ee3\u5f00\u53d1\u7684\u5229\u5668\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u7075\u9b42\u62f7\u95ee\u590d\u6742\u573a\u666f\u8be5\u5982\u4f55\u9009\u62e9",children:"\u7075\u9b42\u62f7\u95ee\uff1a\u590d\u6742\u573a\u666f\u8be5\u5982\u4f55\u9009\u62e9"}),"\n",(0,a.jsxs)(n.p,{children:["\u968f\u7740\u6280\u672f\u7684\u53d1\u5c55\uff0c\u50cf ",(0,a.jsx)(n.code,{children:"MyBatis-Flex"})," \u8fd9\u6837\u7684\u65b0\u5174\u6846\u67b6\u5f00\u59cb\u652f\u6301Java \u7f16\u7a0b\u5f0f Join\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u5bf9\u4e8e\u7b80\u5355\u7684\u8fde\u8868\u67e5\u8be2\uff0c\u5b83\u770b\u8d77\u6765\u786e\u5b9e\u8fd8\u4e0d\u9519"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"QueryWrapper query = QueryWrapper.create()\n    .select(ACCOUNT.ID, ACCOUNT.USER_NAME, ROLE.ROLE_NAME)\n    .from(ACCOUNT)\n    .leftJoin(ROLE).on(ACCOUNT.ROLE_ID.eq(ROLE.ID))\n    .where(ACCOUNT.AGE.ge(18));\n    \nList<AccountDTO> list = accountMapper.selectListByQueryAs(query, AccountDTO.class);\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f46\u662f\uff0c\u4e00\u65e6\u4e1a\u52a1\u903b\u8f91\u5347\u7ea7\uff0c\u6d89\u53ca\u5230\u590d\u6742\u7684\u5b50\u67e5\u8be2\u6216\u5d4c\u5957\u903b\u8f91\u65f6\uff0cJava \u7f16\u7a0b\u5f0f\u7684\u201c\u53ef\u7ef4\u62a4\u6027\u201d\u5c31\u4f1a\u53d7\u5230\u6311\u6218\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u6bd4\u5982\u6211\u4eec\u8981\u5b9e\u73b0\u8fd9\u4e2a SQL\uff1a \u67e5\u8be2\u8ba2\u5355\u603b\u989d\u5927\u4e8e\u201c\u7528\u62371\u5e73\u5747\u8ba2\u5355\u989d\u201d\u7684\u6240\u6709\u8ba2\u5355\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u539f\u751f SQL \u5199\u6cd5\uff08\u6e05\u6670\u660e\u4e86\uff09\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM tb_order \nWHERE total_price > (\n    SELECT AVG(total_price) FROM tb_order WHERE user_id = 1\n)\n"})}),"\n",(0,a.jsx)(n.p,{children:"Java \u7f16\u7a0b\u5f0f\u5199\u6cd5\uff08MyBatis-Flex\uff09\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"// \u5148\u6784\u5efa\u5b50\u67e5\u8be2\nQueryWrapper subQuery = QueryWrapper.create()\n    .select(avg(ORDER.TOTAL_PRICE))\n    .from(ORDER)\n    .where(ORDER.USER_ID.eq(1));\n\n// \u518d\u6784\u5efa\u4e3b\u67e5\u8be2\nQueryWrapper mainQuery = QueryWrapper.create()\n    .select(ORDER.ALL_COLUMNS)\n    .from(ORDER)\n    .where(ORDER.TOTAL_PRICE.gt(subQuery)); // \u5bf9\u8c61\u5d4c\u5957\n\nList<Order> list = orderMapper.selectListByQuery(mainQuery);\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u867d\u7136 Java \u5199\u6cd5\u505a\u5230\u4e86\u7c7b\u578b\u5b89\u5168\uff08\u9632\u624b\u8bef\uff09\uff0c\u4f46\u5728\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u903b\u8f91\u76f4\u89c2\u6027\u4e0a\uff0c\u5b83\u786e\u5b9e\u4e0d\u5982\u539f\u751f SQL\u3002"}),"\n",(0,a.jsx)(n.p,{children:"SQL \u662f\u58f0\u660e\u5f0f\u8bed\u8a00\uff0c\u4e00\u773c\u5c31\u80fd\u770b\u51fa\u201c\u610f\u56fe\u201d\uff1b\u800c Java Wrapper \u662f\u547d\u4ee4\u5f0f\u5806\u53e0\uff0c\u5f53\u5d4c\u5957\u5c42\u7ea7\u8fbe\u5230 3 \u5c42\u4ee5\u4e0a\u65f6\uff0c\u7ef4\u62a4\u8005\u9700\u8981\u5728\u5927\u8111\u91cc\u628a Java \u5bf9\u8c61\u201c\u7ffb\u8bd1\u201d\u56de SQL \u624d\u80fd\u7406\u89e3\u903b\u8f91\uff0c\u8fd9\u65e0\u7591\u589e\u52a0\u4e86\u5fc3\u667a\u8d1f\u62c5"}),"\n",(0,a.jsx)(n.h2,{id:"\u603b\u7ed3\u4e0e\u5efa\u8bae",children:"\u603b\u7ed3\u4e0e\u5efa\u8bae"}),"\n",(0,a.jsxs)(n.p,{children:["\u5982\u679c\u662f\u5728",(0,a.jsx)(n.code,{children:"Mybatis"}),"\u76f8\u4f3c",(0,a.jsx)(n.code,{children:"ORM"}),"\u6846\u67b6\u7684\u6280\u672f\u4f7f\u7528\uff0c\u6211\u8fd8\u662f\u66f4\u504f\u5411\u4e8e",(0,a.jsx)(n.code,{children:"MyBatis-Plus"}),"\uff0c\u7b80\u5355\u67e5\u8be2\u65e0\u9700\u53ef\u4ee5\u7f16\u7a0b\u5f0f\u5b9e\u73b0\uff0c\u590d\u6742SQL\u53ea\u80fd\u4f7f\u7528",(0,a.jsx)(n.code,{children:"XML"}),"\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e00\u79cd\u5f3a\u5236\u7f16\u7801\u89c4\u8303"]}),"\n",(0,a.jsxs)(n.p,{children:["\u5982\u679c\u662f\u4f7f\u7528",(0,a.jsx)(n.code,{children:"MyBatis-Flex"}),"\u5c31\u53ef\u80fd\u5f62\u6210java\u7f16\u7a0bSQL\u7684\u53ef\u7ef4\u62a4\u707e\u96be"]}),"\n",(0,a.jsxs)(n.p,{children:["\u5176\u6b21\u8fd8\u8981\u8003\u8651",(0,a.jsx)(n.code,{children:"MyBatis-Flex"}),"\u6846\u67b6\u7684\u7a33\u5b9a\u6027\u3001\u6d3b\u8dc3\u5ea6\u7b49\u3002\u65b0\u6846\u67b6\u5f80\u5f80\u4f1a\u6709\u66f4\u591a\u7684\u5751"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},19266(e,n,s){s.d(n,{A:()=>r});const r=s.p+"assets/images/Mybatis-select-tag-fdb1836768449087a62fb098972dda85.png"},28453(e,n,s){s.d(n,{R:()=>c,x:()=>t});var r=s(96540);const a={},i=r.createContext(a);function c(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);